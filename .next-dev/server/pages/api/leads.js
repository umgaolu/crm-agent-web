"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/leads";
exports.ids = ["pages/api/leads"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleads&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cleads%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleads&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cleads%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\leads\\index.ts */ \"(api)/./pages/api/leads/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/leads\",\n        pathname: \"/api/leads\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_leads_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmxlYWRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNsZWFkcyU1Q2luZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JtLWFnZW50LXdlYi8/NTgyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGxlYWRzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbGVhZHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9sZWFkc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleads&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cleads%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/leads/index.ts":
/*!**********************************!*\
  !*** ./pages/api/leads/index.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction readEnv(value) {\n    const raw = value !== null && value !== undefined ? String(value).trim() : \"\";\n    if (!raw) {\n        return \"\";\n    }\n    return raw.replace(/^['\"`]/, \"\").replace(/['\"`]$/, \"\").trim();\n}\nconst supabaseUrl = readEnv(\"https://vvrokpefmojngpoxvsan.supabase.co\");\nconst supabaseKey = readEnv(\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ2cm9rcGVmbW9qbmdwb3h2c2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MzUzNTIsImV4cCI6MjA4MzQxMTM1Mn0.t-tHn0A7uzizGEytzeaNvz-i5BGL9sqq-yGOvGE2crQ\" || 0);\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey || \"\");\nasync function handler(req, res) {\n    const expectedToken = process.env.CRM_API_TOKEN;\n    const headerToken = req.headers[\"x-crm-token\"];\n    const token = Array.isArray(headerToken) ? headerToken[0] : headerToken;\n    if (expectedToken && token !== expectedToken) {\n        res.status(401).json({\n            error: \"Unauthorized\"\n        });\n        return;\n    }\n    if (!supabaseUrl || !supabaseKey) {\n        res.status(500).json({\n            error: \"Supabase配置缺失\"\n        });\n        return;\n    }\n    if (req.method === \"GET\") {\n        const { keyword, status, owner } = req.query;\n        let query = supabase.from(\"customer_leads\").select(\"*\");\n        if (typeof keyword === \"string\" && keyword.trim()) {\n            const trimmed = keyword.trim();\n            const like = `%${trimmed}%`;\n            const orConditions = [\n                `客户姓名.ilike.${like}`,\n                `邮箱.ilike.${like}`\n            ];\n            if (/^\\d+$/.test(trimmed)) {\n                orConditions.push(`联系电话.eq.${Number(trimmed)}`);\n            }\n            query = query.or(orConditions.join(\",\"));\n        }\n        if (typeof status === \"string\" && status) {\n            query = query.eq(\"跟进状态\", status);\n        }\n        if (typeof owner === \"string\" && owner) {\n            query = query.eq(\"负责销售员\", owner);\n        }\n        const { data, error } = await query.order(\"创建日期\", {\n            ascending: false\n        }).limit(200);\n        if (error) {\n            res.status(500).json({\n                error: error.message\n            });\n            return;\n        }\n        const rows = data || [];\n        const leadIds = rows.map((row)=>row[\"线索ID\"]).filter((id)=>id !== null && id !== undefined).map((id)=>String(id));\n        let leadMarksByLeadId = {};\n        if (leadIds.length > 0) {\n            const { data: marks } = await supabase.from(\"lead_marks\").select(\"*\").in(\"线索ID\", leadIds);\n            if (marks && Array.isArray(marks)) {\n                leadMarksByLeadId = {};\n                for (const row of marks){\n                    const leadId = row[\"线索ID\"];\n                    if (leadId === null || leadId === undefined) {\n                        continue;\n                    }\n                    const key = String(leadId);\n                    if (!leadMarksByLeadId[key]) {\n                        leadMarksByLeadId[key] = row;\n                    }\n                }\n            }\n        }\n        res.status(200).json({\n            items: rows.map((row)=>{\n                const leadId = String(row[\"线索ID\"]);\n                const markRow = leadMarksByLeadId[leadId];\n                const scoreValue = markRow && typeof markRow[\"线索分数\"] === \"number\" ? markRow[\"线索分数\"] : markRow && typeof markRow.score === \"number\" ? markRow.score : null;\n                const hasMark = Boolean(markRow);\n                return {\n                    id: leadId,\n                    name: row[\"客户姓名\"],\n                    phone: row[\"联系电话\"] ? String(row[\"联系电话\"]) : undefined,\n                    email: row[\"邮箱\"],\n                    status: row[\"跟进状态\"],\n                    source: row[\"来源渠道\"],\n                    owner: row[\"负责销售员\"],\n                    createdAt: row[\"创建日期\"],\n                    nextFollowUp: row[\"最后跟进日期\"],\n                    intentionProduct: row[\"意向产品\"],\n                    budgetRange: row[\"预算范围\"],\n                    remark: row[\"备注\"],\n                    position: row[\"客户岗位\"],\n                    trainingNeed: row[\"参加培训的需求强弱\"],\n                    trialDuration: row[\"试听课收听时长\"],\n                    communicationTimes: row[\"与客户沟通次数\"],\n                    aiScore: typeof scoreValue === \"number\" ? scoreValue : null,\n                    aiPros: markRow ? markRow[\"有利因素\"] ?? markRow.pros ?? \"\" : \"\",\n                    aiCons: markRow ? markRow[\"不利因素\"] ?? markRow.cons ?? \"\" : \"\",\n                    aiSuggestions: markRow ? markRow[\"后续建议\"] ?? markRow.suggestions ?? \"\" : \"\",\n                    hasAiMark: hasMark\n                };\n            })\n        });\n        return;\n    }\n    if (req.method === \"POST\") {\n        const body = req.body || {};\n        const statusMap = {\n            new: \"新建\",\n            processing: \"跟进中\",\n            won: \"已转化\",\n            lost: \"丢单\"\n        };\n        const mappedStatus = body.status && statusMap[body.status] || body.status || \"新建\";\n        const generatedId = body.id || `L${Date.now().toString(10)}`;\n        const payload = {\n            线索ID: generatedId,\n            客户姓名: body.name,\n            联系电话: body.phone ? Number(body.phone) : null,\n            邮箱: body.email,\n            来源渠道: body.source,\n            跟进状态: mappedStatus,\n            负责销售员: body.owner,\n            创建日期: body.createdAt,\n            最后跟进日期: body.nextFollowUp || null,\n            意向产品: body.intentionProduct || null,\n            预算范围: body.budgetRange || null,\n            备注: body.remark || null,\n            客户岗位: body.position || null,\n            试听课收听时长: body.trialDuration || null,\n            与客户沟通次数: body.communicationTimes || null\n        };\n        const { data, error } = await supabase.from(\"customer_leads\").insert(payload).select(\"*\").single();\n        if (error) {\n            res.status(500).json({\n                error: error.message\n            });\n            return;\n        }\n        res.status(201).json({\n            item: {\n                id: data[\"线索ID\"],\n                name: data[\"客户姓名\"],\n                phone: data[\"联系电话\"] ? String(data[\"联系电话\"]) : undefined,\n                email: data[\"邮箱\"],\n                status: data[\"跟进状态\"],\n                source: data[\"来源渠道\"],\n                owner: data[\"负责销售员\"],\n                createdAt: data[\"创建日期\"],\n                nextFollowUp: data[\"最后跟进日期\"],\n                intentionProduct: data[\"意向产品\"],\n                budgetRange: data[\"预算范围\"],\n                remark: data[\"备注\"],\n                position: data[\"客户岗位\"],\n                trainingNeed: data[\"参加培训的需求强弱\"],\n                trialDuration: data[\"试听课收听时长\"],\n                communicationTimes: data[\"与客户沟通次数\"]\n            }\n        });\n        return;\n    }\n    res.setHeader(\"Allow\", \"GET,POST\");\n    res.status(405).end(\"Method Not Allowed\");\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksQ0FBQyxPQUFPLElBQUl4QztnQkFDN0NpRSxPQUFPekIsSUFBSSxDQUFDLEtBQUs7Z0JBQ2pCbEIsUUFBUWtCLElBQUksQ0FBQyxPQUFPO2dCQUNwQjBCLFFBQVExQixJQUFJLENBQUMsT0FBTztnQkFDcEJiLE9BQU9hLElBQUksQ0FBQyxRQUFRO2dCQUNwQjJCLFdBQVczQixJQUFJLENBQUMsT0FBTztnQkFDdkI0QixjQUFjNUIsSUFBSSxDQUFDLFNBQVM7Z0JBQzVCNkIsa0JBQWtCN0IsSUFBSSxDQUFDLE9BQU87Z0JBQzlCOEIsYUFBYTlCLElBQUksQ0FBQyxPQUFPO2dCQUN6QitCLFFBQVEvQixJQUFJLENBQUMsS0FBSztnQkFDbEJnQyxVQUFVaEMsSUFBSSxDQUFDLE9BQU87Z0JBQ3RCaUMsY0FBY2pDLElBQUksQ0FBQyxZQUFZO2dCQUMvQmtDLGVBQWVsQyxJQUFJLENBQUMsVUFBVTtnQkFDOUJtQyxvQkFBb0JuQyxJQUFJLENBQUMsVUFBVTtZQUNyQztRQUNGO1FBQ0E7SUFDRjtJQUVBMUIsSUFBSW9HLFNBQVMsQ0FBQyxTQUFTO0lBQ3ZCcEcsSUFBSVEsTUFBTSxDQUFDLEtBQUs2RixHQUFHLENBQUM7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jcm0tYWdlbnQtd2ViLy4vcGFnZXMvYXBpL2xlYWRzL2luZGV4LnRzPzFhNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcblxuZnVuY3Rpb24gcmVhZEVudih2YWx1ZTogdW5rbm93bikge1xuICBjb25zdCByYXcgPSB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gU3RyaW5nKHZhbHVlKS50cmltKCkgOiBcIlwiO1xuICBpZiAoIXJhdykge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHJldHVybiByYXcucmVwbGFjZSgvXlsnXCJgXS8sIFwiXCIpLnJlcGxhY2UoL1snXCJgXSQvLCBcIlwiKS50cmltKCk7XG59XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcmVhZEVudihwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwpO1xuY29uc3Qgc3VwYWJhc2VLZXkgPSByZWFkRW52KFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX0tFWVxuKTtcblxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5IHx8IFwiXCIpO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGNvbnN0IGV4cGVjdGVkVG9rZW4gPSBwcm9jZXNzLmVudi5DUk1fQVBJX1RPS0VOO1xuICBjb25zdCBoZWFkZXJUb2tlbiA9IHJlcS5oZWFkZXJzW1wieC1jcm0tdG9rZW5cIl07XG4gIGNvbnN0IHRva2VuID0gQXJyYXkuaXNBcnJheShoZWFkZXJUb2tlbikgPyBoZWFkZXJUb2tlblswXSA6IGhlYWRlclRva2VuO1xuICBpZiAoZXhwZWN0ZWRUb2tlbiAmJiB0b2tlbiAhPT0gZXhwZWN0ZWRUb2tlbikge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VLZXkpIHtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBcIlN1cGFiYXNl6YWN572u57y65aSxXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICBjb25zdCB7IGtleXdvcmQsIHN0YXR1cywgb3duZXIgfSA9IHJlcS5xdWVyeTtcbiAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZS5mcm9tKFwiY3VzdG9tZXJfbGVhZHNcIikuc2VsZWN0KFwiKlwiKTtcbiAgICBpZiAodHlwZW9mIGtleXdvcmQgPT09IFwic3RyaW5nXCIgJiYga2V5d29yZC50cmltKCkpIHtcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBrZXl3b3JkLnRyaW0oKTtcbiAgICAgIGNvbnN0IGxpa2UgPSBgJSR7dHJpbW1lZH0lYDtcbiAgICAgIGNvbnN0IG9yQ29uZGl0aW9ucyA9IFtcbiAgICAgICAgYOWuouaIt+Wnk+WQjS5pbGlrZS4ke2xpa2V9YCxcbiAgICAgICAgYOmCrueusS5pbGlrZS4ke2xpa2V9YFxuICAgICAgXTtcbiAgICAgIGlmICgvXlxcZCskLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICAgIG9yQ29uZGl0aW9ucy5wdXNoKGDogZTns7vnlLXor50uZXEuJHtOdW1iZXIodHJpbW1lZCl9YCk7XG4gICAgICB9XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKG9yQ29uZGl0aW9ucy5qb2luKFwiLFwiKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RhdHVzID09PSBcInN0cmluZ1wiICYmIHN0YXR1cykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcShcIui3n+i/m+eKtuaAgVwiLCBzdGF0dXMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG93bmVyID09PSBcInN0cmluZ1wiICYmIG93bmVyKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKFwi6LSf6LSj6ZSA5ZSu5ZGYXCIsIG93bmVyKTtcbiAgICB9XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnkub3JkZXIoXCLliJvlu7rml6XmnJ9cIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLmxpbWl0KDIwMCk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJvd3MgPSBkYXRhIHx8IFtdO1xuICAgIGNvbnN0IGxlYWRJZHMgPSByb3dzXG4gICAgICAubWFwKChyb3c6IGFueSkgPT4gcm93W1wi57q/57SiSURcIl0pXG4gICAgICAuZmlsdGVyKChpZDogYW55KSA9PiBpZCAhPT0gbnVsbCAmJiBpZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgLm1hcCgoaWQ6IGFueSkgPT4gU3RyaW5nKGlkKSk7XG5cbiAgICBsZXQgbGVhZE1hcmtzQnlMZWFkSWQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICAgIGlmIChsZWFkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHsgZGF0YTogbWFya3MgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwibGVhZF9tYXJrc1wiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgICAuaW4oXCLnur/ntKJJRFwiLCBsZWFkSWRzKTtcblxuICAgICAgaWYgKG1hcmtzICYmIEFycmF5LmlzQXJyYXkobWFya3MpKSB7XG4gICAgICAgIGxlYWRNYXJrc0J5TGVhZElkID0ge307XG4gICAgICAgIGZvciAoY29uc3Qgcm93IG9mIG1hcmtzKSB7XG4gICAgICAgICAgY29uc3QgbGVhZElkID0gKHJvdyBhcyBhbnkpW1wi57q/57SiSURcIl07XG4gICAgICAgICAgaWYgKGxlYWRJZCA9PT0gbnVsbCB8fCBsZWFkSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGtleSA9IFN0cmluZyhsZWFkSWQpO1xuICAgICAgICAgIGlmICghbGVhZE1hcmtzQnlMZWFkSWRba2V5XSkge1xuICAgICAgICAgICAgbGVhZE1hcmtzQnlMZWFkSWRba2V5XSA9IHJvdztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBpdGVtczogcm93cy5tYXAoKHJvdzogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGxlYWRJZCA9IFN0cmluZyhyb3dbXCLnur/ntKJJRFwiXSk7XG4gICAgICAgIGNvbnN0IG1hcmtSb3cgPSBsZWFkTWFya3NCeUxlYWRJZFtsZWFkSWRdO1xuICAgICAgICBjb25zdCBzY29yZVZhbHVlID1cbiAgICAgICAgICBtYXJrUm93ICYmIHR5cGVvZiBtYXJrUm93W1wi57q/57Si5YiG5pWwXCJdID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICA/IG1hcmtSb3dbXCLnur/ntKLliIbmlbBcIl1cbiAgICAgICAgICAgIDogbWFya1JvdyAmJiB0eXBlb2YgbWFya1Jvdy5zY29yZSA9PT0gXCJudW1iZXJcIlxuICAgICAgICAgICAgPyBtYXJrUm93LnNjb3JlXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGNvbnN0IGhhc01hcmsgPSBCb29sZWFuKG1hcmtSb3cpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IGxlYWRJZCxcbiAgICAgICAgICBuYW1lOiByb3dbXCLlrqLmiLflp5PlkI1cIl0sXG4gICAgICAgICAgcGhvbmU6IHJvd1tcIuiBlOezu+eUteivnVwiXSA/IFN0cmluZyhyb3dbXCLogZTns7vnlLXor51cIl0pIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGVtYWlsOiByb3dbXCLpgq7nrrFcIl0sXG4gICAgICAgICAgc3RhdHVzOiByb3dbXCLot5/ov5vnirbmgIFcIl0sXG4gICAgICAgICAgc291cmNlOiByb3dbXCLmnaXmupDmuKDpgZNcIl0sXG4gICAgICAgICAgb3duZXI6IHJvd1tcIui0n+i0o+mUgOWUruWRmFwiXSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHJvd1tcIuWIm+W7uuaXpeacn1wiXSxcbiAgICAgICAgICBuZXh0Rm9sbG93VXA6IHJvd1tcIuacgOWQjui3n+i/m+aXpeacn1wiXSxcbiAgICAgICAgICBpbnRlbnRpb25Qcm9kdWN0OiByb3dbXCLmhI/lkJHkuqflk4FcIl0sXG4gICAgICAgICAgYnVkZ2V0UmFuZ2U6IHJvd1tcIumihOeul+iMg+WbtFwiXSxcbiAgICAgICAgICByZW1hcms6IHJvd1tcIuWkh+azqFwiXSxcbiAgICAgICAgICBwb3NpdGlvbjogcm93W1wi5a6i5oi35bKX5L2NXCJdLFxuICAgICAgICAgIHRyYWluaW5nTmVlZDogcm93W1wi5Y+C5Yqg5Z+56K6t55qE6ZyA5rGC5by65byxXCJdLFxuICAgICAgICAgIHRyaWFsRHVyYXRpb246IHJvd1tcIuivleWQrOivvuaUtuWQrOaXtumVv1wiXSxcbiAgICAgICAgICBjb21tdW5pY2F0aW9uVGltZXM6IHJvd1tcIuS4juWuouaIt+ayn+mAmuasoeaVsFwiXSxcbiAgICAgICAgICBhaVNjb3JlOiB0eXBlb2Ygc2NvcmVWYWx1ZSA9PT0gXCJudW1iZXJcIiA/IHNjb3JlVmFsdWUgOiBudWxsLFxuICAgICAgICAgIGFpUHJvczogbWFya1JvdyA/IG1hcmtSb3dbXCLmnInliKnlm6DntKBcIl0gPz8gbWFya1Jvdy5wcm9zID8/IFwiXCIgOiBcIlwiLFxuICAgICAgICAgIGFpQ29uczogbWFya1JvdyA/IG1hcmtSb3dbXCLkuI3liKnlm6DntKBcIl0gPz8gbWFya1Jvdy5jb25zID8/IFwiXCIgOiBcIlwiLFxuICAgICAgICAgIGFpU3VnZ2VzdGlvbnM6IG1hcmtSb3dcbiAgICAgICAgICAgID8gbWFya1Jvd1tcIuWQjue7reW7uuiurlwiXSA/PyBtYXJrUm93LnN1Z2dlc3Rpb25zID8/IFwiXCJcbiAgICAgICAgICAgIDogXCJcIixcbiAgICAgICAgICBoYXNBaU1hcms6IGhhc01hcmtcbiAgICAgICAgfTtcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgY29uc3QgYm9keSA9IHJlcS5ib2R5IHx8IHt9O1xuICAgIGNvbnN0IHN0YXR1c01hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIG5ldzogXCLmlrDlu7pcIixcbiAgICAgIHByb2Nlc3Npbmc6IFwi6Lef6L+b5LitXCIsXG4gICAgICB3b246IFwi5bey6L2s5YyWXCIsXG4gICAgICBsb3N0OiBcIuS4ouWNlVwiXG4gICAgfTtcbiAgICBjb25zdCBtYXBwZWRTdGF0dXMgPVxuICAgICAgKGJvZHkuc3RhdHVzICYmIHN0YXR1c01hcFtib2R5LnN0YXR1c10pIHx8IGJvZHkuc3RhdHVzIHx8IFwi5paw5bu6XCI7XG4gICAgY29uc3QgZ2VuZXJhdGVkSWQgPSBib2R5LmlkIHx8IGBMJHtEYXRlLm5vdygpLnRvU3RyaW5nKDEwKX1gO1xuICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICDnur/ntKJJRDogZ2VuZXJhdGVkSWQsXG4gICAgICDlrqLmiLflp5PlkI06IGJvZHkubmFtZSxcbiAgICAgIOiBlOezu+eUteivnTogYm9keS5waG9uZSA/IE51bWJlcihib2R5LnBob25lKSA6IG51bGwsXG4gICAgICDpgq7nrrE6IGJvZHkuZW1haWwsXG4gICAgICDmnaXmupDmuKDpgZM6IGJvZHkuc291cmNlLFxuICAgICAg6Lef6L+b54q25oCBOiBtYXBwZWRTdGF0dXMsXG4gICAgICDotJ/otKPplIDllK7lkZg6IGJvZHkub3duZXIsXG4gICAgICDliJvlu7rml6XmnJ86IGJvZHkuY3JlYXRlZEF0LFxuICAgICAg5pyA5ZCO6Lef6L+b5pel5pyfOiBib2R5Lm5leHRGb2xsb3dVcCB8fCBudWxsLFxuICAgICAg5oSP5ZCR5Lqn5ZOBOiBib2R5LmludGVudGlvblByb2R1Y3QgfHwgbnVsbCxcbiAgICAgIOmihOeul+iMg+WbtDogYm9keS5idWRnZXRSYW5nZSB8fCBudWxsLFxuICAgICAg5aSH5rOoOiBib2R5LnJlbWFyayB8fCBudWxsLFxuICAgICAg5a6i5oi35bKX5L2NOiBib2R5LnBvc2l0aW9uIHx8IG51bGwsXG4gICAgICDor5XlkKzor77mlLblkKzml7bplb86IGJvZHkudHJpYWxEdXJhdGlvbiB8fCBudWxsLFxuICAgICAg5LiO5a6i5oi35rKf6YCa5qyh5pWwOiBib2R5LmNvbW11bmljYXRpb25UaW1lcyB8fCBudWxsXG4gICAgfTtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJjdXN0b21lcl9sZWFkc1wiKVxuICAgICAgLmluc2VydChwYXlsb2FkKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGl0ZW06IHtcbiAgICAgICAgaWQ6IGRhdGFbXCLnur/ntKJJRFwiXSxcbiAgICAgICAgbmFtZTogZGF0YVtcIuWuouaIt+Wnk+WQjVwiXSxcbiAgICAgICAgcGhvbmU6IGRhdGFbXCLogZTns7vnlLXor51cIl0gPyBTdHJpbmcoZGF0YVtcIuiBlOezu+eUteivnVwiXSkgOiB1bmRlZmluZWQsXG4gICAgICAgIGVtYWlsOiBkYXRhW1wi6YKu566xXCJdLFxuICAgICAgICBzdGF0dXM6IGRhdGFbXCLot5/ov5vnirbmgIFcIl0sXG4gICAgICAgIHNvdXJjZTogZGF0YVtcIuadpea6kOa4oOmBk1wiXSxcbiAgICAgICAgb3duZXI6IGRhdGFbXCLotJ/otKPplIDllK7lkZhcIl0sXG4gICAgICAgIGNyZWF0ZWRBdDogZGF0YVtcIuWIm+W7uuaXpeacn1wiXSxcbiAgICAgICAgbmV4dEZvbGxvd1VwOiBkYXRhW1wi5pyA5ZCO6Lef6L+b5pel5pyfXCJdLFxuICAgICAgICBpbnRlbnRpb25Qcm9kdWN0OiBkYXRhW1wi5oSP5ZCR5Lqn5ZOBXCJdLFxuICAgICAgICBidWRnZXRSYW5nZTogZGF0YVtcIumihOeul+iMg+WbtFwiXSxcbiAgICAgICAgcmVtYXJrOiBkYXRhW1wi5aSH5rOoXCJdLFxuICAgICAgICBwb3NpdGlvbjogZGF0YVtcIuWuouaIt+Wyl+S9jVwiXSxcbiAgICAgICAgdHJhaW5pbmdOZWVkOiBkYXRhW1wi5Y+C5Yqg5Z+56K6t55qE6ZyA5rGC5by65byxXCJdLFxuICAgICAgICB0cmlhbER1cmF0aW9uOiBkYXRhW1wi6K+V5ZCs6K++5pS25ZCs5pe26ZW/XCJdLFxuICAgICAgICBjb21tdW5pY2F0aW9uVGltZXM6IGRhdGFbXCLkuI7lrqLmiLfmsp/pgJrmrKHmlbBcIl1cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgXCJHRVQsUE9TVFwiKTtcbiAgcmVzLnN0YXR1cyg0MDUpLmVuZChcIk1ldGhvZCBOb3QgQWxsb3dlZFwiKTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJyZWFkRW52IiwidmFsdWUiLCJyYXciLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJ0cmltIiwicmVwbGFjZSIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJTVVBBQkFTRV9TRVJWSUNFX0tFWSIsInN1cGFiYXNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImV4cGVjdGVkVG9rZW4iLCJDUk1fQVBJX1RPS0VOIiwiaGVhZGVyVG9rZW4iLCJoZWFkZXJzIiwidG9rZW4iLCJBcnJheSIsImlzQXJyYXkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJtZXRob2QiLCJrZXl3b3JkIiwib3duZXIiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJ0cmltbWVkIiwibGlrZSIsIm9yQ29uZGl0aW9ucyIsInRlc3QiLCJwdXNoIiwiTnVtYmVyIiwib3IiLCJqb2luIiwiZXEiLCJkYXRhIiwib3JkZXIiLCJhc2NlbmRpbmciLCJsaW1pdCIsIm1lc3NhZ2UiLCJyb3dzIiwibGVhZElkcyIsIm1hcCIsInJvdyIsImZpbHRlciIsImlkIiwibGVhZE1hcmtzQnlMZWFkSWQiLCJsZW5ndGgiLCJtYXJrcyIsImluIiwibGVhZElkIiwia2V5IiwiaXRlbXMiLCJtYXJrUm93Iiwic2NvcmVWYWx1ZSIsInNjb3JlIiwiaGFzTWFyayIsIkJvb2xlYW4iLCJuYW1lIiwicGhvbmUiLCJlbWFpbCIsInNvdXJjZSIsImNyZWF0ZWRBdCIsIm5leHRGb2xsb3dVcCIsImludGVudGlvblByb2R1Y3QiLCJidWRnZXRSYW5nZSIsInJlbWFyayIsInBvc2l0aW9uIiwidHJhaW5pbmdOZWVkIiwidHJpYWxEdXJhdGlvbiIsImNvbW11bmljYXRpb25UaW1lcyIsImFpU2NvcmUiLCJhaVByb3MiLCJwcm9zIiwiYWlDb25zIiwiY29ucyIsImFpU3VnZ2VzdGlvbnMiLCJzdWdnZXN0aW9ucyIsImhhc0FpTWFyayIsImJvZHkiLCJzdGF0dXNNYXAiLCJuZXciLCJwcm9jZXNzaW5nIiwid29uIiwibG9zdCIsIm1hcHBlZFN0YXR1cyIsImdlbmVyYXRlZElkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicGF5bG9hZCIsIue6v+e0oklEIiwi5a6i5oi35aeT5ZCNIiwi6IGU57O755S16K+dIiwi6YKu566xIiwi5p2l5rqQ5rig6YGTIiwi6Lef6L+b54q25oCBIiwi6LSf6LSj6ZSA5ZSu5ZGYIiwi5Yib5bu65pel5pyfIiwi5pyA5ZCO6Lef6L+b5pel5pyfIiwi5oSP5ZCR5Lqn5ZOBIiwi6aKE566X6IyD5Zu0Iiwi5aSH5rOoIiwi5a6i5oi35bKX5L2NIiwi6K+V5ZCs6K++5pS25ZCs5pe26ZW/Iiwi5LiO5a6i5oi35rKf6YCa5qyh5pWwIiwiaW5zZXJ0Iiwic2luZ2xlIiwiaXRlbSIsInNldEhlYWRlciIsImVuZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/leads/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleads&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cleads%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();