"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/files";
exports.ids = ["pages/api/files"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\files\\index.ts */ \"(api)/./pages/api/files/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/files\",\n        pathname: \"/api/files\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_files_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmZpbGVzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNmaWxlcyU1Q2luZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxzREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsc0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JtLWFnZW50LXdlYi8/YTNlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGZpbGVzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZmlsZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9maWxlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/files/index.ts":
/*!**********************************!*\
  !*** ./pages/api/files/index.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction readEnv(value) {\n    const raw = value !== null && value !== undefined ? String(value).trim() : \"\";\n    if (!raw) {\n        return \"\";\n    }\n    return raw.replace(/^['\"`]/, \"\").replace(/['\"`]$/, \"\").trim();\n}\nconst supabaseUrl = readEnv(\"https://vvrokpefmojngpoxvsan.supabase.co\");\nconst supabaseKey = readEnv(\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ2cm9rcGVmbW9qbmdwb3h2c2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MzUzNTIsImV4cCI6MjA4MzQxMTM1Mn0.t-tHn0A7uzizGEytzeaNvz-i5BGL9sqq-yGOvGE2crQ\" || 0);\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey || \"\");\nfunction toStringSafe(value) {\n    if (value === null || value === undefined) {\n        return \"\";\n    }\n    return String(value);\n}\nfunction normalizeFileRow(row) {\n    const source = row || {};\n    return {\n        id: source.id !== null && source.id !== undefined ? String(source.id) : \"\",\n        name: source.file_name ? String(source.file_name) : \"\",\n        type: source.file_type ? String(source.file_type) : \"\",\n        creator: source.created_by ? String(source.created_by) : \"\",\n        createdAt: source.created_at ? String(source.created_at) : \"\",\n        updatedAt: source.modified_at ? String(source.modified_at) : \"\"\n    };\n}\nfunction inferFileExtension(type) {\n    const raw = (type || \"\").trim();\n    if (raw === \"周报\") {\n        return \"md\";\n    }\n    const lower = raw.toLowerCase();\n    if (lower === \"pdf\") {\n        return \"pdf\";\n    }\n    if (lower === \"word\") {\n        return \"docx\";\n    }\n    if (lower === \"excel\") {\n        return \"xlsx\";\n    }\n    if (lower === \"markdown\" || lower === \"md\") {\n        return \"md\";\n    }\n    return \"txt\";\n}\nfunction toSafePathSegment(input) {\n    const cleaned = (input || \"\").trim().replace(/[<>:\"/\\\\|?*\\x00-\\x1F]/g, \"-\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").replace(/^-+/, \"\").replace(/-+$/, \"\");\n    if (!cleaned) {\n        return \"file\";\n    }\n    return cleaned.slice(0, 80);\n}\nfunction buildGeneratedFilePath(name, type) {\n    const now = new Date();\n    const datePart = now.toISOString().slice(0, 10).replace(/-/g, \"\");\n    const ext = inferFileExtension(type);\n    const safeName = toSafePathSegment(name);\n    const uniquePart = `${Date.now()}-${Math.random().toString(16).slice(2, 10)}`;\n    return `generated/${datePart}/${safeName}-${uniquePart}.${ext}`;\n}\nasync function insertGeneratedFile(params) {\n    const nowIso = new Date().toISOString();\n    const creator = params.creator || \"系统\";\n    const payload = {\n        file_name: params.name,\n        file_type: params.type,\n        file_path: buildGeneratedFilePath(params.name, params.type),\n        created_by: creator,\n        created_at: nowIso,\n        modified_at: nowIso\n    };\n    const description = params.description ? params.description.trim() : \"\";\n    const payloadWithDescription = description ? {\n        ...payload,\n        file_description: description\n    } : payload;\n    const { data, error } = await supabase.from(\"generated_files\").insert(payloadWithDescription).select(\"id,created_at,file_name,file_type,modified_at,created_by\").single();\n    if (error) {\n        if (description && /column .* does not exist/i.test(error.message)) {\n            const retry = await supabase.from(\"generated_files\").insert(payload).select(\"id,created_at,file_name,file_type,modified_at,created_by\").single();\n            if (retry.error) {\n                throw new Error(retry.error.message || \"新增失败\");\n            }\n            return retry.data;\n        }\n        throw new Error(error.message || \"新增失败\");\n    }\n    return data;\n}\nasync function handler(req, res) {\n    const expectedToken = process.env.CRM_API_TOKEN;\n    const headerToken = req.headers[\"x-crm-token\"];\n    const token = Array.isArray(headerToken) ? headerToken[0] : headerToken;\n    if (expectedToken && token !== expectedToken) {\n        res.status(401).json({\n            error: \"Unauthorized\"\n        });\n        return;\n    }\n    if (!supabaseUrl || !supabaseKey) {\n        res.status(500).json({\n            error: \"Supabase配置缺失\"\n        });\n        return;\n    }\n    if (req.method === \"GET\") {\n        const { keyword } = req.query;\n        const keywordValue = typeof keyword === \"string\" ? keyword : \"\";\n        try {\n            let query = supabase.from(\"generated_files\").select(\"id,created_at,file_name,file_type,modified_at,created_by\").order(\"created_at\", {\n                ascending: false\n            }).limit(200);\n            if (keywordValue.trim()) {\n                query = query.ilike(\"file_name\", `%${keywordValue.trim()}%`);\n            }\n            const { data, error } = await query;\n            if (error) {\n                res.status(500).json({\n                    error: error.message\n                });\n                return;\n            }\n            const rows = Array.isArray(data) ? data : [];\n            const normalized = rows.map((row)=>normalizeFileRow(row));\n            res.status(200).json({\n                items: normalized\n            });\n            return;\n        } catch (e) {\n            res.status(500).json({\n                error: e?.message || \"查询失败\"\n            });\n            return;\n        }\n    }\n    if (req.method === \"POST\") {\n        const body = req.body || {};\n        const name = toStringSafe(body.name).trim();\n        const type = toStringSafe(body.type).trim();\n        const creator = toStringSafe(body.creator).trim();\n        const description = toStringSafe(body.description).trim();\n        if (!name) {\n            res.status(400).json({\n                error: \"文件名不能为空\"\n            });\n            return;\n        }\n        if (!type) {\n            res.status(400).json({\n                error: \"文件类型不能为空\"\n            });\n            return;\n        }\n        try {\n            const data = await insertGeneratedFile({\n                name,\n                type,\n                creator: creator || undefined,\n                description: description || undefined\n            });\n            res.status(201).json({\n                item: normalizeFileRow(data)\n            });\n            return;\n        } catch (e) {\n            res.status(500).json({\n                error: e?.message || \"新增失败\"\n            });\n            return;\n        }\n    }\n    res.setHeader(\"Allow\", \"GET,POST\");\n    res.status(405).end(\"Method Not Allowed\");\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9rQyxHQUFRO1lBQ2Z0QixJQUFJUSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFcEIsT0FBT2lDLEdBQUczQixXQUFXO1lBQU87WUFDbkQ7UUFDRjtJQUNGO0lBRUFLLElBQUl5QixTQUFTLENBQUMsU0FBUztJQUN2QnpCLElBQUlRLE1BQU0sQ0FBQyxLQUFLa0IsR0FBRyxDQUFDO0FBQ3RCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3JtLWFnZW50LXdlYi8uL3BhZ2VzL2FwaS9maWxlcy9pbmRleC50cz9iZDA3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbmZ1bmN0aW9uIHJlYWRFbnYodmFsdWU6IHVua25vd24pIHtcbiAgY29uc3QgcmF3ID0gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCA/IFN0cmluZyh2YWx1ZSkudHJpbSgpIDogXCJcIjtcbiAgaWYgKCFyYXcpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICByZXR1cm4gcmF3LnJlcGxhY2UoL15bJ1wiYF0vLCBcIlwiKS5yZXBsYWNlKC9bJ1wiYF0kLywgXCJcIikudHJpbSgpO1xufVxuXG5jb25zdCBzdXBhYmFzZVVybCA9IHJlYWRFbnYocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMKTtcbmNvbnN0IHN1cGFiYXNlS2V5ID0gcmVhZEVudihcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVlcbik7XG5cbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSB8fCBcIlwiKTtcblxuZnVuY3Rpb24gdG9TdHJpbmdTYWZlKHZhbHVlOiB1bmtub3duKSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVSb3cocm93OiBhbnkpIHtcbiAgY29uc3Qgc291cmNlID0gKHJvdyB8fCB7fSkgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcmV0dXJuIHtcbiAgICBpZDogc291cmNlLmlkICE9PSBudWxsICYmIHNvdXJjZS5pZCAhPT0gdW5kZWZpbmVkID8gU3RyaW5nKHNvdXJjZS5pZCkgOiBcIlwiLFxuICAgIG5hbWU6IHNvdXJjZS5maWxlX25hbWUgPyBTdHJpbmcoc291cmNlLmZpbGVfbmFtZSkgOiBcIlwiLFxuICAgIHR5cGU6IHNvdXJjZS5maWxlX3R5cGUgPyBTdHJpbmcoc291cmNlLmZpbGVfdHlwZSkgOiBcIlwiLFxuICAgIGNyZWF0b3I6IHNvdXJjZS5jcmVhdGVkX2J5ID8gU3RyaW5nKHNvdXJjZS5jcmVhdGVkX2J5KSA6IFwiXCIsXG4gICAgY3JlYXRlZEF0OiBzb3VyY2UuY3JlYXRlZF9hdCA/IFN0cmluZyhzb3VyY2UuY3JlYXRlZF9hdCkgOiBcIlwiLFxuICAgIHVwZGF0ZWRBdDogc291cmNlLm1vZGlmaWVkX2F0ID8gU3RyaW5nKHNvdXJjZS5tb2RpZmllZF9hdCkgOiBcIlwiXG4gIH07XG59XG5cbmZ1bmN0aW9uIGluZmVyRmlsZUV4dGVuc2lvbih0eXBlOiBzdHJpbmcpIHtcbiAgY29uc3QgcmF3ID0gKHR5cGUgfHwgXCJcIikudHJpbSgpO1xuICBpZiAocmF3ID09PSBcIuWRqOaKpVwiKSB7XG4gICAgcmV0dXJuIFwibWRcIjtcbiAgfVxuICBjb25zdCBsb3dlciA9IHJhdy50b0xvd2VyQ2FzZSgpO1xuICBpZiAobG93ZXIgPT09IFwicGRmXCIpIHtcbiAgICByZXR1cm4gXCJwZGZcIjtcbiAgfVxuICBpZiAobG93ZXIgPT09IFwid29yZFwiKSB7XG4gICAgcmV0dXJuIFwiZG9jeFwiO1xuICB9XG4gIGlmIChsb3dlciA9PT0gXCJleGNlbFwiKSB7XG4gICAgcmV0dXJuIFwieGxzeFwiO1xuICB9XG4gIGlmIChsb3dlciA9PT0gXCJtYXJrZG93blwiIHx8IGxvd2VyID09PSBcIm1kXCIpIHtcbiAgICByZXR1cm4gXCJtZFwiO1xuICB9XG4gIHJldHVybiBcInR4dFwiO1xufVxuXG5mdW5jdGlvbiB0b1NhZmVQYXRoU2VnbWVudChpbnB1dDogc3RyaW5nKSB7XG4gIGNvbnN0IGNsZWFuZWQgPSAoaW5wdXQgfHwgXCJcIilcbiAgICAudHJpbSgpXG4gICAgLnJlcGxhY2UoL1s8PjpcIi9cXFxcfD8qXFx4MDAtXFx4MUZdL2csIFwiLVwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgIC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcbiAgICAucmVwbGFjZSgvXi0rLywgXCJcIilcbiAgICAucmVwbGFjZSgvLSskLywgXCJcIik7XG4gIGlmICghY2xlYW5lZCkge1xuICAgIHJldHVybiBcImZpbGVcIjtcbiAgfVxuICByZXR1cm4gY2xlYW5lZC5zbGljZSgwLCA4MCk7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkR2VuZXJhdGVkRmlsZVBhdGgobmFtZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcpIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgZGF0ZVBhcnQgPSBub3cudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkucmVwbGFjZSgvLS9nLCBcIlwiKTtcbiAgY29uc3QgZXh0ID0gaW5mZXJGaWxlRXh0ZW5zaW9uKHR5cGUpO1xuICBjb25zdCBzYWZlTmFtZSA9IHRvU2FmZVBhdGhTZWdtZW50KG5hbWUpO1xuICBjb25zdCB1bmlxdWVQYXJ0ID0gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyLCAxMCl9YDtcbiAgcmV0dXJuIGBnZW5lcmF0ZWQvJHtkYXRlUGFydH0vJHtzYWZlTmFtZX0tJHt1bmlxdWVQYXJ0fS4ke2V4dH1gO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRHZW5lcmF0ZWRGaWxlKHBhcmFtczoge1xuICBuYW1lOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgY3JlYXRvcj86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IG5vd0lzbyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgY29uc3QgY3JlYXRvciA9IHBhcmFtcy5jcmVhdG9yIHx8IFwi57O757ufXCI7XG5cbiAgY29uc3QgcGF5bG9hZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICBmaWxlX25hbWU6IHBhcmFtcy5uYW1lLFxuICAgIGZpbGVfdHlwZTogcGFyYW1zLnR5cGUsXG4gICAgZmlsZV9wYXRoOiBidWlsZEdlbmVyYXRlZEZpbGVQYXRoKHBhcmFtcy5uYW1lLCBwYXJhbXMudHlwZSksXG4gICAgY3JlYXRlZF9ieTogY3JlYXRvcixcbiAgICBjcmVhdGVkX2F0OiBub3dJc28sXG4gICAgbW9kaWZpZWRfYXQ6IG5vd0lzb1xuICB9O1xuXG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gcGFyYW1zLmRlc2NyaXB0aW9uID8gcGFyYW1zLmRlc2NyaXB0aW9uLnRyaW0oKSA6IFwiXCI7XG4gIGNvbnN0IHBheWxvYWRXaXRoRGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvblxuICAgID8geyAuLi5wYXlsb2FkLCBmaWxlX2Rlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB9XG4gICAgOiBwYXlsb2FkO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJnZW5lcmF0ZWRfZmlsZXNcIilcbiAgICAuaW5zZXJ0KHBheWxvYWRXaXRoRGVzY3JpcHRpb24pXG4gICAgLnNlbGVjdChcImlkLGNyZWF0ZWRfYXQsZmlsZV9uYW1lLGZpbGVfdHlwZSxtb2RpZmllZF9hdCxjcmVhdGVkX2J5XCIpXG4gICAgLnNpbmdsZSgpO1xuXG4gIGlmIChlcnJvcikge1xuICAgIGlmIChkZXNjcmlwdGlvbiAmJiAvY29sdW1uIC4qIGRvZXMgbm90IGV4aXN0L2kudGVzdChlcnJvci5tZXNzYWdlKSkge1xuICAgICAgY29uc3QgcmV0cnkgPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImdlbmVyYXRlZF9maWxlc1wiKVxuICAgICAgICAuaW5zZXJ0KHBheWxvYWQpXG4gICAgICAgIC5zZWxlY3QoXCJpZCxjcmVhdGVkX2F0LGZpbGVfbmFtZSxmaWxlX3R5cGUsbW9kaWZpZWRfYXQsY3JlYXRlZF9ieVwiKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBpZiAocmV0cnkuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJldHJ5LmVycm9yLm1lc3NhZ2UgfHwgXCLmlrDlop7lpLHotKVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0cnkuZGF0YTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgXCLmlrDlop7lpLHotKVcIik7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgY29uc3QgZXhwZWN0ZWRUb2tlbiA9IHByb2Nlc3MuZW52LkNSTV9BUElfVE9LRU47XG4gIGNvbnN0IGhlYWRlclRva2VuID0gcmVxLmhlYWRlcnNbXCJ4LWNybS10b2tlblwiXTtcbiAgY29uc3QgdG9rZW4gPSBBcnJheS5pc0FycmF5KGhlYWRlclRva2VuKSA/IGhlYWRlclRva2VuWzBdIDogaGVhZGVyVG9rZW47XG4gIGlmIChleHBlY3RlZFRva2VuICYmIHRva2VuICE9PSBleHBlY3RlZFRva2VuKSB7XG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiU3VwYWJhc2XphY3nva7nvLrlpLFcIiB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJHRVRcIikge1xuICAgIGNvbnN0IHsga2V5d29yZCB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IGtleXdvcmRWYWx1ZSA9IHR5cGVvZiBrZXl3b3JkID09PSBcInN0cmluZ1wiID8ga2V5d29yZCA6IFwiXCI7XG5cbiAgICB0cnkge1xuICAgICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJnZW5lcmF0ZWRfZmlsZXNcIilcbiAgICAgICAgLnNlbGVjdChcImlkLGNyZWF0ZWRfYXQsZmlsZV9uYW1lLGZpbGVfdHlwZSxtb2RpZmllZF9hdCxjcmVhdGVkX2J5XCIpXG4gICAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5saW1pdCgyMDApO1xuXG4gICAgICBpZiAoa2V5d29yZFZhbHVlLnRyaW0oKSkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmlsaWtlKFwiZmlsZV9uYW1lXCIsIGAlJHtrZXl3b3JkVmFsdWUudHJpbSgpfSVgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW107XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gcm93cy5tYXAoKHJvdykgPT4gbm9ybWFsaXplRmlsZVJvdyhyb3cpKTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBpdGVtczogbm9ybWFsaXplZCB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgXCLmn6Xor6LlpLHotKVcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAocmVxLm1ldGhvZCA9PT0gXCJQT1NUXCIpIHtcbiAgICBjb25zdCBib2R5ID0gKHJlcS5ib2R5IHx8IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGNvbnN0IG5hbWUgPSB0b1N0cmluZ1NhZmUoYm9keS5uYW1lKS50cmltKCk7XG4gICAgY29uc3QgdHlwZSA9IHRvU3RyaW5nU2FmZShib2R5LnR5cGUpLnRyaW0oKTtcbiAgICBjb25zdCBjcmVhdG9yID0gdG9TdHJpbmdTYWZlKGJvZHkuY3JlYXRvcikudHJpbSgpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdG9TdHJpbmdTYWZlKGJvZHkuZGVzY3JpcHRpb24pLnRyaW0oKTtcblxuICAgIGlmICghbmFtZSkge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCLmlofku7blkI3kuI3og73kuLrnqbpcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIuaWh+S7tuexu+Wei+S4jeiDveS4uuepulwiIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgaW5zZXJ0R2VuZXJhdGVkRmlsZSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNyZWF0b3I6IGNyZWF0b3IgfHwgdW5kZWZpbmVkLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfHwgdW5kZWZpbmVkXG4gICAgICB9KTtcbiAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgaXRlbTogbm9ybWFsaXplRmlsZVJvdyhkYXRhKSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgXCLmlrDlop7lpLHotKVcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgXCJHRVQsUE9TVFwiKTtcbiAgcmVzLnN0YXR1cyg0MDUpLmVuZChcIk1ldGhvZCBOb3QgQWxsb3dlZFwiKTtcbn1cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJyZWFkRW52IiwidmFsdWUiLCJyYXciLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJ0cmltIiwicmVwbGFjZSIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJTVVBBQkFTRV9TRVJWSUNFX0tFWSIsInN1cGFiYXNlIiwidG9TdHJpbmdTYWZlIiwibm9ybWFsaXplRmlsZVJvdyIsInJvdyIsInNvdXJjZSIsImlkIiwibmFtZSIsImZpbGVfbmFtZSIsInR5cGUiLCJmaWxlX3R5cGUiLCJjcmVhdG9yIiwiY3JlYXRlZF9ieSIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkQXQiLCJtb2RpZmllZF9hdCIsImluZmVyRmlsZUV4dGVuc2lvbiIsImxvd2VyIiwidG9Mb3dlckNhc2UiLCJ0b1NhZmVQYXRoU2VnbWVudCIsImlucHV0IiwiY2xlYW5lZCIsInNsaWNlIiwiYnVpbGRHZW5lcmF0ZWRGaWxlUGF0aCIsIm5vdyIsIkRhdGUiLCJkYXRlUGFydCIsInRvSVNPU3RyaW5nIiwiZXh0Iiwic2FmZU5hbWUiLCJ1bmlxdWVQYXJ0IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiaW5zZXJ0R2VuZXJhdGVkRmlsZSIsInBhcmFtcyIsIm5vd0lzbyIsInBheWxvYWQiLCJmaWxlX3BhdGgiLCJkZXNjcmlwdGlvbiIsInBheWxvYWRXaXRoRGVzY3JpcHRpb24iLCJmaWxlX2Rlc2NyaXB0aW9uIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsImluc2VydCIsInNlbGVjdCIsInNpbmdsZSIsInRlc3QiLCJtZXNzYWdlIiwicmV0cnkiLCJFcnJvciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJleHBlY3RlZFRva2VuIiwiQ1JNX0FQSV9UT0tFTiIsImhlYWRlclRva2VuIiwiaGVhZGVycyIsInRva2VuIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdHVzIiwianNvbiIsIm1ldGhvZCIsImtleXdvcmQiLCJxdWVyeSIsImtleXdvcmRWYWx1ZSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJpbGlrZSIsInJvd3MiLCJub3JtYWxpemVkIiwibWFwIiwiaXRlbXMiLCJlIiwiYm9keSIsIml0ZW0iLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/files/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffiles&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cfiles%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();